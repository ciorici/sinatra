!function(r){function t(r){var t;return(r=r.replace(/ /g,"")).match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(t=100*parseFloat(r.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),t=parseInt(t)):t=100,t}function e(r,t,e,o){var i,a,n;i=t.data("a8cIris"),a=t.data("wpWpColorPicker"),i._color._alpha=r,n=i._color.toString(),t.val(n),a.toggler.css({"background-color":n}),o&&(prisma,coreupdate_alpha_value_on_alpha_slider(r,e)),t.trigger("color-updated")}function o(r,t){t.slider("value",r),t.find(".ui-slider-handle").text(r.toString())}wp.customize.controlConstructor["prisma-core-color"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=t.setting.get();t.container.on("color-updated",".prisma-core-color-control",function(){value=r(this).val(),value!==e&&(t.setting.set(value),e=value)})}}),Color.prototype.toString=function(r){if("no-alpha"==r)return this.toCSS("rgba","1").replace(/\s+/g,"");if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var t=parseInt(this._color,10).toString(16);if(this.error)return"";if(t.length<6)for(var e=6-t.length-1;e>=0;e--)t="0"+t;return"#"+t},r(document).ready(function(r){r(".prisma-core-color-control").each(function(){var i,a,n,c,l,s,d,u;i=r(this),a=i.val().replace(/\s+/g,""),n=i.attr("data-show-opacity"),c=i.attr("data-default-color"),l={change:function(r,e){var o,a;o=e.color.toString(),i.val(o),c==o&&(a=t(o),d.find(".ui-slider-handle").text(a)),s.find(".transparency").css("background-color",e.color.toString("no-alpha")),i.trigger("color-updated")},palettes:prisma_core_customizer_localized.color_palette},i.wpColorPicker(l),s=i.parents(".wp-picker-container:first"),"true"==n&&r('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(s.find(".wp-picker-holder")),d=s.find(".alpha-slider"),u={create:function(t,e){var o=r(this).slider("value");r(this).find(".ui-slider-handle").text(o),r(this).siblings(".transparency ").css("background-color",a)},value:t(a),range:"max",step:1,min:0,max:100,animate:300},d.slider(u),"true"==n&&d.find(".ui-slider-handle").addClass("show-opacity"),s.find(".min-click-zone").on("click",function(){e(0,i,d,!0)}),s.find(".max-click-zone").on("click",function(){e(100,i,d,!0)}),s.find(".iris-palette").on("click",function(e){var a,n;e.preventDefault(),o(n=t(a=r(this).css("background-color")),d),100!=n&&(a=a.replace(/[^,]+(?=\))/,(n/100).toFixed(2))),i.val(a),i.wpColorPicker("color",a)}),s.find(".button.wp-picker-clear").on("click",function(r){r.preventDefault(),i.val(""),o(100,d),i.trigger("color-updated")}),s.find(".button.wp-picker-default").on("click",function(r){r.preventDefault(),o(t(c),d)}),i.on("input",function(e){e.preventDefault(),o(t(r(this).val()),d),i.trigger("color-updated")}),d.slider().on("slide",function(t,o){e(parseFloat(o.value)/100,i,d,!1),r(this).find(".ui-slider-handle").text(o.value)}),r(".iris-picker, .prisma-core-color-control").on("click",function(r){r.preventDefault()})})})}(jQuery);