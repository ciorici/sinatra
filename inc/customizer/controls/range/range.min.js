!function(){"use strict";wp.customize.controlConstructor["prisma-core-range"]=wp.customize.Control.extend({ready:function(){var n=this,t=n.setting.get();n.container.find(".prisma-core-range-wrapper").rangeControl({id:n.params.id,unit:n.params.unit,value:t,responsive:n.params.responsive,change:function(){n.save()}})},save:function(){var n={},t=this.params.responsive;if(!1===t||void 0===t||0==t.length)n.value=parseFloat(this.container.find(".prisma-core-range-input").val());else for(var e in t)n[e]=parseFloat(this.container.find(".control-responsive."+e+" .prisma-core-range-input").val());this.container.find(".prisma-core-control-unit").length&&(n.unit=this.container.find(".prisma-core-control-unit input:checked").val()),this.setting.set(n)}}),function(n){var t;t={options:{id:!1,option:!1,responsive:!1,unit:!1,value:!1,change:!1},_create:function(){var n=this,t=n.element;n.unit=t.find(".prisma-core-control-wrap").attr("data-unit"),n._addListeners(),"object"==typeof n.options.responsive&&n._initResponsiveControls(),!1!==n.options.unit&&n._initUnit()},_addListeners:function(){var t,e,i,a,o=this;o.element.change(function(t){n.isFunction(o.options.change)&&o.options.change.call(this,t)}),o.element.on("keyup input paste",".prisma-core-range-input",function(){o._autocorrectSlider(n(this))}).on("focusout",function(){o._autocorrectSlider(n(this))}),o.element.on("click","input[type=range]",function(){t=n(this),e=t.parent().children(".prisma-core-range-input"),a=t.val(),i!==a&&(i=a,e.val(a).change())}),o.element.on("mousedown","input[type=range]",function(){t=n(this),e=t.parent().children(".prisma-core-range-input"),t.mousemove(function(){a=t.val(),i!==a&&(i=a,e.val(a).change())})}),o.element.on("mouseup","input[type=range]",function(){n(this).off("mousemove")}),o.element.on("click",".prisma-core-reset-range",function(){var t;o.element.find(".prisma-core-reset-range").each(function(e,i){t=n(i),o.unit=t.data("reset_unit"),t.closest(".prisma-core-range-wrapper").find('.prisma-core-control-unit input[type="radio"][value="'+t.data("reset_unit")+'"]').click(),t.siblings("input").val(t.data("reset_value"))}),o.element.change()}),o.element.on("click",".prisma-core-control-unit input",function(){var t=n(this);o.element.find('.prisma-core-control-wrap input[type="range"]').each(function(e,i){n(this).attr("min",t.data("min")),n(this).attr("max",t.data("max")),n(this).attr("step",t.data("step"))}),"px"!==t.val()||"rem"!==o.unit&&"em"!==o.unit?"rem"!==t.val()&&"em"!==t.val()||"px"!==o.unit||(o.element.find("input.prisma-core-range-input").each(function(t,e){n(e).val(n(e).val()/16),o._autocorrectSlider(n(e))}),o.unit=t.val()):(o.element.find("input.prisma-core-range-input").each(function(t,e){n(e).val(Math.floor(16*n(e).val())),o._autocorrectSlider(n(e))}),o.unit=t.val())})},_autocorrectSlider:function(n){var t=n.parent().find('input[type="range"]'),e=parseFloat(n.val()),i=parseFloat(n.attr("step")),a=parseFloat(n.attr("min")),o=parseFloat(n.attr("max"));isNaN(e)?t.change():(i>=1&&e%1!=0&&(e=Math.round(e),n.val(e),t.val(e).change()),e>o&&(n.val(o),t.val(o).change()),e<a&&(n.val(a),t.val(a).change()),t.val(e).change())},_initResponsiveControls:function(){var t=this,e=t.element;e.find(".prisma-core-control-wrap");if(e.addClass("prisma-core-control-responsive"),e.find(".customize-control-title").length){var i=n('<ul class="prisma-core-responsive-switchers"></ul>');for(var a in t.options.responsive)i.append('<li class="'+a+'"><span class="preview-'+a+'" data-device="'+a+'"><span class="prisma-core-tooltip small-tooltip">'+a+'</span><i class="'+t.options.responsive[a].icon+'"></i></span></li>');e.find(".customize-control-title").append(i)}},_initUnit:function(){var t=this,e=t.element.find(".prisma-core-control-wrap"),i=wp.template("prisma-core-control-unit"),a={unit:t.options.unit,id:t.options.id,option:t.options.option,selected:e.attr("data-unit")};"object"==typeof t.options.unit?(n(i(a)).insertBefore(e),void 0!==t.options.value.unit&&e.parent().find("#"+t.options.id+"-"+t.options.value.unit+"-unit").click()):"string"==typeof t.options.unit&&n('<span class="prisma-core-range-unit">'+t.options.unit+"</span>").insertAfter(e.find(".prisma-core-range-input")),e.parent().find(".prisma-core-control-unit input:checked").click()}},n.widget("prisma-core.rangeControl",t)}(jQuery)}(jQuery);