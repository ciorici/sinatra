!function(n){"use strict";var t={init:function(){n(document).ready(t.ready),n(window).on("load",t.load),t.bindUIActions(),n(document).trigger("prismaCoreReady")},ready:function(){},load:function(){window.dispatchEvent(new Event("resize"))},resize:function(){},bindUIActions:function(){var a,e=n("#wpwrap");n("body");e.on("click",".plugins .pr-btn:not(.active)",function(i){i.preventDefault(),e.find(".plugins .pr-btn.in-progress").length||(a=n(this),t.pluginAction(a))}),n(document).on("wp-plugin-install-success",t.pluginInstallSuccess),n(document).on("wp-plugin-install-error",t.pluginInstallError)},pluginAction:function(t){if(t.addClass("in-progress").attr("disabled","disabled").html(prisma_core_strings.texts[t.data("action")+"-inprogress"]),"install"===t.data("action"))wp.updates.shouldRequestFilesystemCredentials&&!wp.updates.ajaxLocked&&(wp.updates.requestFilesystemCredentials(event),n(document).on("credential-modal-cancel",function(){t.removeAttr("disabled").removeClass("in-progress").html(prisma_core_strings.texts.install),wp.a11y.speak(wp.updates.l10n.updateCancel,"polite")})),wp.updates.installPlugin({slug:t.data("plugin")});else{var a={_ajax_nonce:prisma_core_strings.wpnonce,plugin:t.data("plugin"),action:"prisma-core-plugin-"+t.data("action")};n.post(prisma_core_strings.ajaxurl,a,function(a){a.success?t.data("redirect")?window.location.href=t.data("redirect"):location.reload():n(".plugins .pr-btn.in-progress").removeAttr("disabled").removeClass("in-progress primary").addClass("secondary").html(prisma_core_strings.texts.retry)})}},pluginInstallSuccess:function(a,e){a.preventDefault();var i,s=jQuery(a.target).data("init");i=void 0===s?e.slug:s;var r=n('.plugins a[data-plugin="'+i+'"]');r.data("action","activate"),t.pluginAction(r)},pluginInstallError:function(t,a){t.preventDefault();var e,i=jQuery(t.target).data("init");e=void 0===i?a.slug:i,n('.plugins a[data-plugin="'+e+'"]').attr("disabled","disabled").removeClass("in-progress primary").addClass("secondary").html(wp.updates.l10n.installFailedShort)}};t.init(),window.prismaCoreAdmin=t}(jQuery);